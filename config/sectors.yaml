# Complete Sector Configuration for Z1_SFC
# Defines all economic sectors, their properties, and relationships

sectors:
  # ==========================================
  # HOUSEHOLD SECTOR
  # ==========================================
  
  "15":
    name: "Households and Nonprofit Organizations Serving Households"
    short_name: "HH"
    kind: "private"
    category: "nonfinancial"
    description: "Individual households and NPOs serving them"
    
    # Instrument capabilities
    can_issue: []  # Households don't issue financial instruments
    can_hold_assets: true
    can_have_liabilities: true
    
    # Grouping and consolidation
    consolidated_group: "HH"
    parent_sector: null
    subsectors: []
    
    # Properties
    is_financial: false
    is_domestic: true
    is_government: false
    is_private: true
    
    # Aggregation
    aggregates_to: null
    aggregation_weight: 1.0
    
    # Special flags
    requires_special_handling: false
    is_residual_sector: false
    
  # ==========================================
  # CORPORATE SECTORS
  # ==========================================
  
  "10":
    name: "Nonfinancial Corporate Business"
    short_name: "NFC"
    kind: "corporate"
    category: "nonfinancial"
    description: "All nonfinancial corporations"
    
    can_issue:
      - "31641"  # Corporate equities
      - "31630"  # Corporate bonds
      - "31691"  # Commercial paper
      - "34000"  # Loans (as borrower)
      - "34300"  # Mortgages (commercial)
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "NFC"
    parent_sector: null
    subsectors: ["11", "12"]  # Includes noncorporate business
    
    is_financial: false
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: null
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  "11":
    name: "Nonfinancial Noncorporate Business"
    short_name: "NFNC"
    kind: "noncorporate"
    category: "nonfinancial"
    description: "Partnerships, sole proprietorships"
    
    can_issue:
      - "34000"  # Loans
      - "34300"  # Mortgages
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "NFC"
    parent_sector: "10"
    subsectors: []
    
    is_financial: false
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: "10"
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  # ==========================================
  # GOVERNMENT SECTORS
  # ==========================================
  
  "31":
    name: "Federal Government"
    short_name: "FedGov"
    kind: "government"
    category: "government"
    description: "U.S. Federal Government"
    
    can_issue:
      - "31611"  # Treasury securities
      - "31613"  # Nonmarketable Treasury securities
      - "31614"  # U.S. savings securities
      - "31615"  # Budget agency securities
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "FG"
    parent_sector: "30"
    subsectors: []
    
    is_financial: false
    is_domestic: true
    is_government: true
    is_private: false
    
    aggregates_to: "30"  # General government
    aggregation_weight: 1.0
    
    requires_special_handling: true  # Special Treasury/Fed relationship
    is_residual_sector: false
    
  "21":
    name: "State and Local Governments, excluding employee retirement funds"
    short_name: "S&L"
    kind: "government"
    category: "government"
    description: "All U.S. state and local government entities"
    
    can_issue:
      - "31620"  # Municipal securities
      - "31622"  # Short-term munis
      - "31624"  # Long-term munis
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "SLG"
    parent_sector: "30"
    subsectors: ["22"]
    
    is_financial: false
    is_domestic: true
    is_government: true
    is_private: false
    
    aggregates_to: "30"
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  "22":
    name: "State and Local Government Employee Retirement Funds"
    short_name: "S&L Pension"
    kind: "government"
    category: "government"
    description: "Public employee pension funds"
    
    can_issue:
      - "31500"  # Pension entitlements
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "SLG"
    parent_sector: "21"
    subsectors: []
    
    is_financial: true  # Quasi-financial
    is_domestic: true
    is_government: true
    is_private: false
    
    aggregates_to: "21"
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  "30":
    name: "General Government"
    short_name: "GenGov"
    kind: "government"
    category: "government"
    description: "Consolidated government sector"
    
    can_issue: []  # Aggregation only
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "GOV"
    parent_sector: null
    subsectors: ["31", "21"]
    
    is_financial: false
    is_domestic: true
    is_government: true
    is_private: false
    
    aggregates_to: null
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  # ==========================================
  # FINANCIAL SECTORS - DEPOSITORY
  # ==========================================
  
  "70":
    name: "Private Depository Institutions"
    short_name: "Banks"
    kind: "depository"
    category: "financial"
    description: "Commercial banks and thrifts"
    
    can_issue:
      - "31200"  # Checkable deposits
      - "31300"  # Time and savings deposits
      - "31320"  # Large time deposits
      - "31641"  # Bank equity
      - "31630"  # Bank bonds
      - "31691"  # Bank commercial paper
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "BANKS"
    parent_sector: "79"
    subsectors: ["72", "73", "74"]
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: "79"
    aggregation_weight: 1.0
    
    requires_special_handling: true  # Reserve requirements
    is_residual_sector: false
    
  "71":
    name: "Monetary Authority (Federal Reserve)"
    short_name: "Fed"
    kind: "central_bank"
    category: "monetary_authority"
    description: "Federal Reserve System"
    
    can_issue:
      - "31130"  # Reserve balances
      - "31120"  # Currency in circulation
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "FED"
    parent_sector: null
    subsectors: []
    
    is_financial: true
    is_domestic: true
    is_government: true  # Quasi-governmental
    is_private: false
    
    aggregates_to: null
    aggregation_weight: 1.0
    
    requires_special_handling: true  # Monetary policy operations
    is_residual_sector: false
    
  "72":
    name: "U.S.-Chartered Depository Institutions"
    short_name: "US Banks"
    kind: "depository"
    category: "financial"
    description: "Banks chartered in the United States"
    
    can_issue:
      - "31200"
      - "31300"
      - "31641"
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "BANKS"
    parent_sector: "70"
    subsectors: []
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: "70"
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  "73":
    name: "Foreign Banking Offices in U.S."
    short_name: "Foreign Banks"
    kind: "depository"
    category: "financial"
    description: "Branches and agencies of foreign banks"
    
    can_issue:
      - "31200"
      - "31300"
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "BANKS"
    parent_sector: "70"
    subsectors: []
    
    is_financial: true
    is_domestic: true  # Operating in U.S.
    is_government: false
    is_private: true
    
    aggregates_to: "70"
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  "74":
    name: "Credit Unions"
    short_name: "CU"
    kind: "depository"
    category: "financial"
    description: "Member-owned financial cooperatives"
    
    can_issue:
      - "31200"
      - "31300"
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "BANKS"
    parent_sector: "70"
    subsectors: []
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true  # Member-owned
    
    aggregates_to: "70"
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  "79":
    name: "All Depository Institutions"
    short_name: "All Depositories"
    kind: "depository"
    category: "financial"
    description: "Consolidated depository sector"
    
    can_issue: []  # Aggregation only
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "DEP"
    parent_sector: null
    subsectors: ["70", "71"]
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: null
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  # ==========================================
  # FINANCIAL SECTORS - FUNDS
  # ==========================================
  
  "63":
    name: "Money Market Funds"
    short_name: "MMF"
    kind: "fund"
    category: "financial"
    description: "Money market mutual funds"
    
    can_issue:
      - "31340"  # MMF shares
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "MMF"
    parent_sector: "60"
    subsectors: []
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: "60"
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  "65":
    name: "Mutual Funds"
    short_name: "MF"
    kind: "fund"
    category: "financial"
    description: "Open-end investment companies"
    
    can_issue:
      - "31642"  # Mutual fund shares
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "MF"
    parent_sector: "60"
    subsectors: []
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: "60"
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  "66":
    name: "Closed-End Funds"
    short_name: "CEF"
    kind: "fund"
    category: "financial"
    description: "Closed-end investment companies"
    
    can_issue:
      - "31643"  # CEF shares
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "CEF"
    parent_sector: "60"
    subsectors: []
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: "60"
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  "67":
    name: "Exchange-Traded Funds"
    short_name: "ETF"
    kind: "fund"
    category: "financial"
    description: "Exchange-traded funds"
    
    can_issue:
      - "31644"  # ETF shares
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "ETF"
    parent_sector: "60"
    subsectors: []
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: "60"
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  "60":
    name: "All Investment Funds"
    short_name: "All Funds"
    kind: "fund"
    category: "financial"
    description: "Consolidated investment fund sector"
    
    can_issue: []  # Aggregation only
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "FUNDS"
    parent_sector: null
    subsectors: ["63", "65", "66", "67"]
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: null
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  # ==========================================
  # FINANCIAL SECTORS - INSURANCE & PENSION
  # ==========================================
  
  "54":
    name: "Life Insurance Companies"
    short_name: "Life Ins"
    kind: "insurance"
    category: "financial"
    description: "Life insurance carriers"
    
    can_issue:
      - "31540"  # Life insurance reserves
      - "31543"  # Annuity reserves
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "LIFE"
    parent_sector: "58"
    subsectors: []
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: "58"
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  "55":
    name: "Property-Casualty Insurance Companies"
    short_name: "P&C Ins"
    kind: "insurance"
    category: "financial"
    description: "Property and casualty insurance carriers"
    
    can_issue:
      - "31550"  # P&C reserves
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "PC"
    parent_sector: "58"
    subsectors: []
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: "58"
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  "59":
    name: "Private Pension Funds"
    short_name: "Pension"
    kind: "pension"
    category: "financial"
    description: "Private defined benefit and contribution plans"
    
    can_issue:
      - "31500"  # Pension entitlements
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "PENSION"
    parent_sector: "58"
    subsectors: ["591", "592"]
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: "58"
    aggregation_weight: 1.0
    
    requires_special_handling: true  # Actuarial consistency
    is_residual_sector: false
    
  "591":
    name: "Defined Benefit Pension Plans"
    short_name: "DB Plans"
    kind: "pension"
    category: "financial"
    description: "Traditional pension plans"
    
    can_issue:
      - "31500"
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "PENSION"
    parent_sector: "59"
    subsectors: []
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: "59"
    aggregation_weight: 1.0
    
    requires_special_handling: true
    is_residual_sector: false
    
  "592":
    name: "Defined Contribution Plans"
    short_name: "DC Plans"
    kind: "pension"
    category: "financial"
    description: "401(k) and similar plans"
    
    can_issue:
      - "31500"
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "PENSION"
    parent_sector: "59"
    subsectors: []
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: "59"
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  "58":
    name: "Insurance and Pension Sector"
    short_name: "Ins & Pension"
    kind: "insurance_pension"
    category: "financial"
    description: "Consolidated insurance and pension sector"
    
    can_issue: []  # Aggregation only
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "INS_PEN"
    parent_sector: null
    subsectors: ["54", "55", "59", "22"]
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: null
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  # ==========================================
  # FINANCIAL SECTORS - OTHER
  # ==========================================
  
  "61":
    name: "Finance Companies"
    short_name: "FinCo"
    kind: "finance_company"
    category: "financial"
    description: "Non-depository lenders"
    
    can_issue:
      - "31691"  # Commercial paper
      - "31630"  # Corporate bonds
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "FINCO"
    parent_sector: null
    subsectors: []
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: null
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  "62":
    name: "Real Estate Investment Trusts"
    short_name: "REITs"
    kind: "reit"
    category: "financial"
    description: "Equity and mortgage REITs"
    
    can_issue:
      - "31645"  # REIT shares
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "REIT"
    parent_sector: null
    subsectors: []
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: null
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  "64":
    name: "Security Brokers and Dealers"
    short_name: "Brokers"
    kind: "broker_dealer"
    category: "financial"
    description: "Investment banks and broker-dealers"
    
    can_issue:
      - "31691"  # Commercial paper
      - "31692"  # Repo liabilities
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "BD"
    parent_sector: null
    subsectors: []
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: null
    aggregation_weight: 1.0
    
    requires_special_handling: true  # Leverage constraints
    is_residual_sector: false
    
  "68":
    name: "Holding Companies"
    short_name: "HoldCo"
    kind: "holding_company"
    category: "financial"
    description: "Financial holding companies"
    
    can_issue:
      - "31641"  # Equity
      - "31630"  # Bonds
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "HC"
    parent_sector: null
    subsectors: []
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: null
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: false
    
  # ==========================================
  # FOREIGN SECTOR
  # ==========================================
  
  "26":
    name: "Rest of the World"
    short_name: "RoW"
    kind: "foreign"
    category: "foreign"
    description: "All foreign entities"
    
    can_issue: []  # Modeled as counterparty
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "ROW"
    parent_sector: null
    subsectors: []
    
    is_financial: false
    is_domestic: false
    is_government: false
    is_private: false
    
    aggregates_to: null
    aggregation_weight: 1.0
    
    requires_special_handling: true  # Balance of payments
    is_residual_sector: false
    
  # ==========================================
  # SPECIAL/RESIDUAL SECTORS
  # ==========================================
  
  "99":
    name: "Financial Business, not elsewhere classified"
    short_name: "Other Fin"
    kind: "other"
    category: "financial"
    description: "Residual financial sector"
    
    can_issue: []
    can_hold_assets: true
    can_have_liabilities: true
    
    consolidated_group: "OTHER"
    parent_sector: null
    subsectors: []
    
    is_financial: true
    is_domestic: true
    is_government: false
    is_private: true
    
    aggregates_to: null
    aggregation_weight: 1.0
    
    requires_special_handling: false
    is_residual_sector: true  # Catches unmapped items

# ==========================================
# SECTOR GROUPINGS FOR ANALYSIS
# ==========================================

groupings:
  # Major institutional sectors
  major_sectors:
    - "15"  # Households
    - "10"  # Nonfinancial corporate
    - "31"  # Federal government
    - "70"  # Banks
    - "71"  # Federal Reserve
    - "26"  # Rest of world
    
  # Domestic nonfinancial
  domestic_nonfinancial:
    - "15"  # Households
    - "10"  # Nonfinancial corporate
    - "11"  # Noncorporate business
    - "31"  # Federal government
    - "21"  # State and local
    
  # Domestic financial
  domestic_financial:
    - "70"  # Banks
    - "71"  # Federal Reserve
    - "63"  # Money market funds
    - "65"  # Mutual funds
    - "59"  # Pension funds
    - "54"  # Life insurance
    - "55"  # P&C insurance
    - "61"  # Finance companies
    - "64"  # Broker-dealers
    
  # Government (all levels)
  government:
    - "31"  # Federal
    - "21"  # State and local
    - "22"  # State/local pensions
    - "71"  # Federal Reserve (quasi)
    
  # Private sector
  private:
    - "15"  # Households
    - "10"  # NFC
    - "11"  # Noncorporate
    - "70"  # Banks
    - "63"  # MMF
    - "65"  # Mutual funds
    - "59"  # Private pensions
    - "54"  # Life insurance
    - "55"  # P&C insurance
    
  # Depository institutions
  depositories:
    - "70"  # Commercial banks
    - "72"  # U.S.-chartered
    - "73"  # Foreign banking offices
    - "74"  # Credit unions
    
  # Investment funds
  funds:
    - "63"  # Money market
    - "65"  # Mutual funds
    - "66"  # Closed-end
    - "67"  # ETFs
    
  # Insurance and pension
  insurance_pension:
    - "54"  # Life insurance
    - "55"  # P&C insurance
    - "59"  # Private pensions
    - "22"  # Public pensions
    
  # Shadow banking
  shadow_banking:
    - "63"  # MMF
    - "61"  # Finance companies
    - "64"  # Broker-dealers
    - "62"  # REITs
    
# ==========================================
# CONSOLIDATION RULES
# ==========================================

consolidation:
  # Rules for sector consolidation
  rules:
    - name: "general_government"
      parent: "30"
      children: ["31", "21", "22"]
      method: "sum"
      
    - name: "all_depositories"
      parent: "79"
      children: ["70", "71"]
      method: "sum"
      
    - name: "all_funds"
      parent: "60"
      children: ["63", "65", "66", "67"]
      method: "sum"
      
    - name: "insurance_pension"
      parent: "58"
      children: ["54", "55", "59", "22"]
      method: "sum"
      
  # Elimination of intra-group positions
  eliminations:
    - group: "government"
      eliminate: ["31611"]  # Intra-government Treasury holdings
      
    - group: "depositories"
      eliminate: ["31200"]  # Inter-bank deposits

# ==========================================
# SPECIAL HANDLING RULES
# ==========================================

special_handling:
  # Federal Reserve
  "71":
    rules:
      - "Reserve balances must equal bank reserves"
      - "Currency issued must equal currency in circulation"
      - "Special treatment for QE operations"
    constraints:
      - "FL713013005 == sum(FL*30130*)"  # Reserve consistency
      
  # Federal Government
  "31":
    rules:
      - "Treasury securities must be consistently valued"
      - "Special treatment for trust funds"
    constraints:
      - "FL313161105 == sum(FL*30611*)"  # Treasury consistency
      
  # Pension funds
  "59":
    rules:
      - "Actuarial consistency required"
      - "Entitlements must match household claims"
    constraints:
      - "FL593150005 == FL153050005"  # Pension entitlement consistency
      
  # Rest of World
  "26":
    rules:
      - "Current account + capital account + errors = 0"
      - "U.S. assets = RoW liabilities and vice versa"
    constraints:
      - "Balance of payments identity"
